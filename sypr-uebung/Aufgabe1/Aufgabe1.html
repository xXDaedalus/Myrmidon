<!DOCTYPE html>
<html lang="de">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noindex, nofollow" />
<style type="text/css">
body { font-family:helvetica,arial,sans-serif; line-height:1.4; }
a { text-decoration:none; color:#059c8c; font-weight:600; }
pre { background-color:#d9e5ec; width:90%; user-select:none; }
code { font-size:larger; white-space:nowrap; }
h1 { font-size:x-large; }
h2 { font-size:large; }
h3 { font-size:medium; }
</style>
<title>Aufgabe 1 Systemprogrammierung</title>
</head>
<body>

<h1>Systemprogrammierung - AIN/2<br>
<span style="font-size:smaller">Sommersemester 2024</span></h1>
<hr>

<h2>&Uuml;bungsaufgabe 1: C Grundtypen</h2>
<p>
<b>Abgabe bis 11./12.4.2024</b></p>

<h3>Programmierung</h3>
<p>
Auf den Seiten 2-15 bis 2-19 der Vorlesungsunterlagen sind 15&nbsp;Grundtypen aufgez&auml;hlt.</p>
<p>
Schreiben Sie ein C-Programm <code>aufgabe1.c</code>, das zu jedem Grundtyp
je eine lokale Variable mit Initialisierung enth&auml;lt.
Zus&auml;tzlich soll das Programm eine Zeigerdefinition
<code>&nbsp;char* s = "Hallo";&nbsp;</code>
enthalten. Sie m&uuml;ssen also insgesamt 16 Variablen definieren.</p>
<p>
Das Programm soll die <u>Adresse</u>, den <u>Platzbedarf</u>, den <u>Typ</u>,
den <u>Namen</u> und den <u>Wert</u> dieser 16 Variablen ausgeben.
Pro Variable soll genau eine Zeile mit den genannten f&uuml;nf Spalten
ausgegeben werden, immer mit der Variablenadresse beginnend.</p>
<p>
Abschlie&szlig;end soll das Programm ausgeben, ob es mit dem C-Datenmodell
<code>"ILP32"</code>, <code>"LP64"</code> oder <code>"LLP64"</code> arbeitet,
oder ob keines der drei Modelle vorliegt:</p>
<ul>
<li>
man spricht von einem <b><code>ILP32</code></b>-Datenmodell,
wenn die Typen <code>int</code> (<b><code>I</code></b>),
<code>long&nbsp;int</code> (<b><code>L</code></b>) und
<code>char*</code> (<b><code>P</code></b>) je 32 Bit belegen</li>
<li>
ein <b><code>LP64</code></b>-Datenmodell liegt vor,
wenn <code>int</code> 32 Bit belegt und
sowohl <code>long&nbsp;int</code> (<b><code>L</code></b>)
als auch <code>char*</code> (<b><code>P</code></b>) je 64 Bit belegen</li>
<li>
ein <b><code>LLP64</code></b>-Datenmodell liegt vor,
wenn <code>int</code> sowie <code>long&nbsp;int</code> je 32 Bit belegen und
sowohl <code>long&nbsp;long&nbsp;int</code> (<b><code>LL</code></b>)
als auch <code>char*</code> (<b><code>P</code></b>) je 64 Bit belegen</li>
</ul>
<p>
<em>
Hinweis:<br>
Achten Sie bei den Werten auf die richtigen von C unterst&uuml;tzen
<code>printf</code>-Formatangabe. Bei den Formatangaben f&uuml;r Zahlen brauchen Sie 
eine Kombination aus "length modifier" und "conversion specifier".
Ein &uuml;bersichtliche Darstellung dazu finden Sie unter
<a href="https://en.cppreference.com/w/c/io/fprintf" target="_blank">
https://en.cppreference.com/w/c/io/fprintf</a>.
Andere Quellen sind das Linux Manual (Kommando <code>&nbsp;man&nbsp;3&nbsp;printf&nbsp;</code>)
oder einschl&auml;gige Internetseiten wie
<a href="https://man7.org/linux/man-pages/index.html" target="_blank">
https://man7.org/linux/man-pages/index.html</a>
(siehe auch die Literaturseite der Vorlesung).
Eine Beschreibung er C-Datenmodelle finden Sie unter
<a href="https://en.cppreference.com/w/c/language/arithmetic_types" target="_blank">
https://en.cppreference.com/w/c/language/arithmetic_types</a>
</em></p>

<br>

<h3>Test und Qualit&auml;tssicherung</h3>
<p>
Speichern Sie die Datei <a href="Makefile" download>&cudarrr;&nbsp;Makefile</a>
in Ihr Arbeitverzeichnis der Aufgabe&nbsp;1. Achten Sie auf den richtigen Namen
<code>Makefile</code> ohne Endung. Falls beim Download eine Endung <code>.txt</code>
erg&auml;nzt wurde, entfernen Sie diese Endung.
&Uuml;bersetzen und binden Sie dann Ihr Programm mit dem Befehl
<br>
<span style="color:red;font-style:italic">
Diesen und alle weiteren Befehle abtippen, nicht mit der Maus kopieren, wenn Sie etwas lernen wollen!
</span></p>
<pre>
    make clean
    make
</pre>
<p>
<em>
Das Programm <code>make</code> automatisiert mittels der Beschreibungen
in <code>Makefile</code> das &Uuml;bersetzen und Binden Ihres Programms.
<br>
Die Entsprechung dazu bei den Java-&Uuml;bungen in Programmiertechnik&nbsp;1
war das Automatisierungswerkzeug <code>ant</code> mit <code>build.xml</code>.</em></p>
<p>
F&uuml;hren Sie Ihr Programm aus und lassen Sie die Ausgaben auch mal vom
<code>sort</code>-Kommando aufsteigend oder absteigend sortieren:</p>
<pre>
    ./aufgabe1
    ./aufgabe1 | sort
    ./aufgabe1 | sort -r
</pre>
<p>
Betrachten Sie die Ausgaben und beantworten Sie folgende Fragen:</p>
<ul>
<li>
Sind die Variablen in der Reihenfolge ihrer Definition im Hauptspeicher abgelegt?</li>
<li>
Liegen die Variablen direkt hintereinander oder gibt es L&uuml;cken?
Falls es L&uuml;cken gibt, wo liegen sie? K&ouml;nnen Sie sich erkl&auml;ren,
warum es eventuell L&uuml;cken gibt?</li>
<li>
Wie viel Speicher belegen die Variablen insgesamt,
also inklusive eventueller L&uuml;cken?</li>
</ul>
<p>
Pr&uuml;fen Sie, ob das Analysewerkzeug <code>cppcheck</code> Probleme in Ihrem
Quellcode meldet.
<br>
Versuchen Sie, wenn m&ouml;glich, die Probleme zu beheben. 
Welche Problemen lassen sich nicht beheben?</p>
<pre>    cppcheck --enable=warning,style --std=c11 aufgabe1.c</pre>
Sie k&ouml;nnen <code>cppcheck</code> auch vereinfacht &uuml;ber 
<code>make</code> aufrufen:
<pre>    make cppcheck</pre>
<p>
<em>
Die Entsprechung zu <code>cppcheck</code> bei den Java-&Uuml;bungen in
Programmiertechnik&nbsp;1 war das Analysewerkzeug <code>spotbugs</code>.
</em></p>

<br>

<h3>Protokoll</h3>
<p>
Erstellen Sie ein Protokoll Ihres Test-Schritts.
&Ouml;ffnen Sie dazu eine neue Konsole oder
setzen Sie Ihre aktuelle Konsole zur&uuml;ck (Konsolenmen&uuml;
<code>Terminal&nbsp;-&gt;&nbsp;Zur&uuml;cksetzen und leeren</code>).</p>
<p>
Rufen Sie in der neuen bzw. zur&uuml;ckgesetzten Konsole
<code>make clean</code> auf und wiederholen Sie alle Kommandos
aus dem Test-Schritt.</p>
<p>
Markieren Sie die Konsolenausgabe abschlie&szlig;end per Men&uuml;punkt
<code>Bearbeiten&nbsp;-&gt;&nbsp;Alles&nbsp;markieren</code>.
&Ouml;ffnen Sie einen Texteditor und kopieren Sie die markierte Konsolenausgabe
durch dr&uuml;cken der mittleren Maustaste (des Rads) in das Editorfenster.
Speichern Sie mit dem Editor die kopierte Konsolenausgabe als Datei
<code>protokoll-aufgabe1.txt</code> im gleichen Verzeichnis wie Ihr Programm.</p>
<p>
Erg&auml;nzen Sie mit dem Texteditor in <code>protokoll-aufgabe1.txt</code>
Ihre Antworten auf die Fragen aus dem Test-Schritt.</p>

<br>

<h3>Abgabe</h3>
<p>
F&uuml;hren Sie Ihr Programm und Ihre Protokolldatei vor.<br>
Zeigen Sie das ausgef&uuml;llte Teilnahmeprotokoll.</p>
<!--
<p>
Verpacken Sie alle Dateien Ihrer L&ouml;sung in ein Archiv:</p>
<pre>
    tar cvzf aufgabe1.tar.gz Makefile aufgabe1.c protokoll-aufgabe1.txt
</pre>
<p>
Laden Sie das Archiv dann in Moodle hoch (siehe dort).</p>
-->
<p>
<em>
Hinweis:<br>
Der Compiler <code>gcc</code> darf f&uuml;r Ihr Programm 
keine Fehler oder Warnungen mehr ausgeben.<br>
Ihr Programm muss au&szlig;erdem ordentlich formatierte sein.
Bessern Sie die Formatierung gegebenenfalls mit <code>astyle</code> nach:<br>
<code>&nbsp;&nbsp;astyle -p -H --style=ansi aufgabe1.c</code></em></p>

<br>

<h3>Freiwillige Zusatzaufgabe (pro Spiegelpunkt 1 Bonuspunkt)</h3>
<ul>
<li>
Erstellen Sie eine Version <code>aufgabe1-int.c</code> Ihres Programms,
die Variablen mit den in C99 eingef&uuml;hrten 28 ganzzahligen Typen 
fester L&auml;nge <code>int8_t</code>, <code>int16_t</code> usw. definiert.
Initialisieren Sie die Variablen jeweils mit der gr&ouml;&szlig;ten 
darstellbaren Zahl<code>INT8_MAX</code>, <code>INT16_MAX</code> usw..
Das Programm soll wie im Pflichtteil jeweils Adresse, Platzbedarf, Typ, Name 
und Wert der 28 Variablen ausgeben. Verwenden Sie f&uuml;r die Ausgabe des 
Werts die ebenfalls in C99 eingef&uuml;hrten Formatangaben <code>PRId8</code>, 
<code>PRId16</code> usw..</p>
<p><em>
Hinweis:
die Typen mit den zugeh&ouml;rigen symbolischen Konstanten und Formatangaben 
finden Sie unter
<a href="https://en.cppreference.com/w/c/types/integer" target="_blank">
https://en.cppreference.com/w/c/types/integer</a></em></p>
<p>
&Uuml;bersetzen, binden, pr&uuml;fen und testen Sie Ihr Programm mit den 
folgenden Aufrufen:</p>
<pre>
    make TARGET=aufgabe1-int
    make TARGET=aufgabe1-int cppcheck
    ./aufgabe1-int
</pre>
</li>
<li>
<p>
Erstellen Sie eine Version <code>aufgabe1-ansi.c</code> Ihres Programms,
die sich mit dem Sprachstandard C89 (auch ANSI-C genannt) begn&uuml;gt.
ANSI-C war auch nach der Ver&ouml;ffentlichung von C99 in der Praxis in 
weitem Gebrauch.</p>
<p>
Variablendefinitionen und Anweisungen d&uuml;rfen in C89 nicht gemischt werden.
Definieren Sie deshalb alle Variablen am Anfang von <code>main</code> gleich 
nach der &ouml;ffnenden geschweiften Klammer.</p>
<p>
Die ganzzahlige Datentypen <code>long&nbsp;long&nbsp;int</code> und
<code>unsigned&nbsp;long&nbsp;long&nbsp;int</code> sowie den Datentyp 
<code>bool</code> bzw. <code>_Bool</code> gab es in C89 noch nicht.</p>
<p>
Es gab in C89 auch noch nicht f&uuml;r alle Zahltypen passende 
<code>printf</code>-Formatangaben.
Verwenden Sie deshalb f&uuml;r <code>sizeof</code>-Werte <code>%lu</code> und 
f&uuml;gen Sie vor dem zugeh&ouml;rigen Argument eine Typanpassung 
<code>(unsigned&nbsp;long)</code> ein.
Ein-Byte-Zahlen geben Sie einfach mit <code>%d</code> bzw. <code>%u</code> aus.
Die Typanpassung des zugeh&ouml;rigen Arguments funktioniert hier automatisch.</p>
<p>
&Uuml;bersetzen, binden, pr&uuml;fen und testen Sie Ihr Programm mit den 
folgenden Aufrufen:</p>
<pre>
    make STD=c89 TARGET=aufgabe1-ansi
    make STD=c89 TARGET=aufgabe1-ansi cppcheck
    ./aufgabe1-ansi
</pre>
</li>
</ul>

<br>

<hr>
<address style="font-size:smaller; text-align:left; float:left;">
<a href="http://www-home.htwg-konstanz.de/~drachen/">Prof. Dr. H. Drachenfels</a>
<br>
<a href="https://www.htwg-konstanz.de">Hochschule Konstanz</a> -
<a href="https://www.htwg-konstanz.de/info/impressum">Impressum</a> -
<a href="https://www.htwg-konstanz.de/info/datenschutzerklaerung/">Datenschutzerkl&auml;rung</a>
</address>
<em style="font-size:smaller; text-align:right; float:right;">
Letzte &Auml;nderung: 19.3.2024
</em>

</body>
</html>

